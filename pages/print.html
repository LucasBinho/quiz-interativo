<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Resultado para Impressão</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <style>
      /* Adicione aqui os estilos específicos para impressão */
      body {
        font-family: Arial, sans-serif;
      }
      .container {
        width: 100%;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
      }
      #character-image {
        max-width: 200px;
        display: block;
        margin: 0 auto 20px;
      }

      #result,
      #character {
        text-transform: capitalize;
      }
      /* Estilos adicionais para impressão */
    </style>
  </head>
  <body>
    <div class="container">
      <h1 id="character"></h1>
      <img id="character-image" alt="Character Image" />
      <p id="result"></p>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const characterName = localStorage.getItem("characterName");
        const messageContent = localStorage.getItem("messageContent");
        const characterImageSrc = localStorage.getItem("characterImageSrc");
        const sessionStartTime = parseInt(
          localStorage.getItem("sessionStartTime")
        );
        const sessionEndTime = Date.now();
        const sessionDuration = (sessionEndTime - sessionStartTime) / 1000;

        document.getElementById("character").textContent = characterName;
        document.getElementById("result").textContent = messageContent;
        const characterImage = document.getElementById("character-image");
        characterImage.src = characterImageSrc;
        characterImage.style.display = "block";

        if (messageContent.trim() !== "") {
          
          const timestamp = new Date().toLocaleString();
          let printLogs = JSON.parse(localStorage.getItem("printLogs")) || [];
          // printLogs.push(timestamp);
          // localStorage.setItem("printLogs", JSON.stringify(printLogs));
          const logEntry = {
            timestamp: timestamp,
            characterName: characterName,
            sessionDuration: sessionDuration 
          };
          printLogs.push(logEntry);
          localStorage.setItem("printLogs", JSON.stringify(printLogs));
        }

        // Aguarda um pouco antes de imprimir para garantir que a página esteja carregada
        setTimeout(function () {
          window.print();
        }, 1000);
      });
    </script>
  </body>
</html>
